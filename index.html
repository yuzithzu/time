<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Store Status</title>
  <style>
    #store-widget {
      max-width: 400px;
      margin: 20px auto;
      padding: 20px;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background-color: #ffffff;
      border-left: 6px solid #007BFF;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    #store-status {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    #countdown {
      font-size: 16px;
      color: #666;
    }

    .open {
      color: #28a745;
    }

    .closed {
      color: #dc3545;
    }

    .soon {
      color: #ffc107;
    }
  </style>
</head>
<body>
  <div id="store-widget">
    <div id="store-status" class=""></div>
    <div id="countdown"></div>
  </div>

  <script>
    function updateStoreStatus() {
      const now = new Date();
      const day = now.getDay();
      const statusEl = document.getElementById("store-status");
      const countdownEl = document.getElementById("countdown");

      const nowMs = now.getTime();
      const time = (h, m = 0) => new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m, 0).getTime();

      const hrs = n => Math.floor(n / (1000 * 60 * 60));
      const mins = n => Math.floor((n % (1000 * 60 * 60)) / (1000 * 60));
      const secs = n => Math.floor((n % (1000 * 60)) / 1000);

      if (day === 0) {
        statusEl.innerHTML = "&#10060; Closed today – Sunday (No operation)";
        statusEl.className = "closed";
        countdownEl.textContent = "";
        return;
      }

      if (day >= 1 && day <= 5) {
        const openMorning = time(8, 0);
        const cutOffAMStart = time(11, 0);
        const lunchStart = time(12, 1);
        const lunchEnd = time(13, 1);
        const openAfternoon = time(13, 1);
        const cutOffPMStart = time(16, 1);
        const cutOffPMEnd = time(16, 50);
        const finalCloseStart = time(16, 51);
        const finalCloseEnd = time(17, 0);

        if (nowMs >= cutOffAMStart && nowMs < lunchStart) {
          const untilLunch = lunchStart - nowMs;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (11AM–12PM)";
          statusEl.className = "soon";
          countdownEl.textContent = `Lunch break starts in: ${hrs(untilLunch)}h ${mins(untilLunch)}m ${secs(untilLunch)}s`;
          return;
        }

        if (nowMs >= lunchStart && nowMs < lunchEnd) {
          const resumeIn = lunchEnd - nowMs;
          statusEl.innerHTML = "&#128308; Closed – Lunch break (12:01 PM to 1:00 PM)";
          statusEl.className = "closed";
          countdownEl.textContent = `Resuming at 1:01 PM in: ${hrs(resumeIn)}h ${mins(resumeIn)}m ${secs(resumeIn)}s`;
          return;
        }

        if (nowMs >= cutOffPMStart && nowMs <= cutOffPMEnd) {
          const endCutoff = cutOffPMEnd - nowMs;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (4:01–4:50 PM)";
          statusEl.className = "soon";
          countdownEl.textContent = `Full closure in: ${hrs(endCutoff)}h ${mins(endCutoff)}m ${secs(endCutoff)}s`;
          return;
        }

        if (nowMs >= finalCloseStart && nowMs < finalCloseEnd) {
          const endClose = finalCloseEnd - nowMs;
          statusEl.innerHTML = "&#10060; Fully closed for the day (After cut-off)";
          statusEl.className = "closed";
          countdownEl.textContent = `Until tomorrow: ${hrs(endClose)}h ${mins(endClose)}m ${secs(endClose)}s`;
          return;
        }

        if (nowMs >= openMorning && nowMs < cutOffAMStart) {
          const untilCutoff = cutOffAMStart - nowMs;
          statusEl.innerHTML = "&#9989; Operation is OPEN";
          statusEl.className = "open";
          countdownEl.textContent = `Cut-off starts in: ${hrs(untilCutoff)}h ${mins(untilCutoff)}m ${secs(untilCutoff)}s`;
          return;
        }

        if (nowMs >= openAfternoon && nowMs <= time(16, 0)) {
          const untilCutoff = cutOffPMStart - nowMs;
          statusEl.innerHTML = "&#9989; Operation is OPEN";
          statusEl.className = "open";
          countdownEl.textContent = `Cut-off starts in: ${hrs(untilCutoff)}h ${mins(untilCutoff)}m ${secs(untilCutoff)}s`;
          return;
        }

        if (nowMs < openMorning) {
          const diffOpen = openMorning - nowMs;
          statusEl.innerHTML = diffOpen <= 30 * 60 * 1000 ? "&#128285; Opening soon..." : "&#128308; Operation is still CLOSED";
          statusEl.className = diffOpen <= 30 * 60 * 1000 ? "soon" : "closed";
          countdownEl.textContent = `Opening in: ${hrs(diffOpen)}h ${mins(diffOpen)}m ${secs(diffOpen)}s`;
          return;
        }

        const nextOpen = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 8, 0, 0);
        const nextDiff = nextOpen.getTime() - nowMs;
        statusEl.innerHTML = "&#128308; Operation is CLOSED for the day";
        statusEl.className = "closed";
        countdownEl.textContent = `Reopening in: ${hrs(nextDiff)}h ${mins(nextDiff)}m ${secs(nextDiff)}s`;
        return;
      }

      if (day === 6) {
        const openStart = time(8, 0);
        const openEnd = time(11, 0);
        const cutOffStart = time(11, 0);
        const cutOffEnd = time(11, 30);
        const closedStart = time(11, 31);
        const noon = time(12, 0);

        if (nowMs >= openStart && nowMs < openEnd) {
          const untilCutOff = openEnd - nowMs;
          statusEl.innerHTML = "&#9989; Operation is OPEN (Saturday)";
          statusEl.className = "open";
          countdownEl.textContent = `Cut-off starts in: ${hrs(untilCutOff)}h ${mins(untilCutOff)}m ${secs(untilCutOff)}s`;
          return;
        }

        if (nowMs >= cutOffStart && nowMs < cutOffEnd) {
          const untilClosed = cutOffEnd - nowMs;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (11:00–11:30 AM)";
          statusEl.className = "soon";
          countdownEl.textContent = `Closing soon in: ${hrs(untilClosed)}h ${mins(untilClosed)}m ${secs(untilClosed)}s`;
          return;
        }

        if (nowMs >= closedStart && nowMs < noon) {
          const untilWeekend = noon - nowMs;
          statusEl.innerHTML = "&#10060; Closed – After cut-off (11:31–12:00 NN)";
          statusEl.className = "closed";
          countdownEl.textContent = `Closed for the weekend in: ${hrs(untilWeekend)}h ${mins(untilWeekend)}m ${secs(untilWeekend)}s`;
          return;
        }

        if (nowMs < openStart) {
          const untilOpen = openStart - nowMs;
          statusEl.innerHTML = "&#128308; Operation is still CLOSED";
          statusEl.className = "closed";
          countdownEl.textContent = `Opening at 8:00 AM in: ${hrs(untilOpen)}h ${mins(untilOpen)}m ${secs(untilOpen)}s`;
          return;
        }

        // After 12:00 NN
        const nextOpen = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 2, 8, 0, 0);
        const nextDiff = nextOpen.getTime() - nowMs;
        statusEl.innerHTML = "&#10060; Operation is CLOSED for the weekend";
        statusEl.className = "closed";
        countdownEl.textContent = `Reopening on Monday: ${hrs(nextDiff)}h ${mins(nextDiff)}m ${secs(nextDiff)}s`;
        return;
      }

    updateStoreStatus();
    setInterval(updateStoreStatus, 1000);
  </script>
</body>
</html>
