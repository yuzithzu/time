<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Store Status</title>
  <style>
    #store-widget {
      max-width: 400px;
      margin: 20px auto;
      padding: 20px;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background-color: #ffffff;
      border-left: 6px solid #007BFF;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    #store-status {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    #countdown {
      font-size: 16px;
      color: #666;
    }

    .open { color: #28a745; }
    .closed { color: #dc3545; }
    .soon { color: #ffc107; }
  </style>
</head>
<body>
  <div id="store-widget">
    <div id="store-status"></div>
    <div id="countdown"></div>
  </div>

  <script>
    function updateStoreStatus() {
      const now = new Date();
      const day = now.getDay();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      const statusEl = document.getElementById("store-status");
      const countdownEl = document.getElementById("countdown");

      const ms = now.getTime();
      const time = (h, m = 0) => new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m).getTime();
      const hrs = n => Math.floor(n / (1000 * 60 * 60));
      const mins = n => Math.floor((n % (1000 * 60 * 60)) / (1000 * 60));
      const secs = n => Math.floor((n % (1000 * 60)) / 1000);

      // Sunday
      if (day === 0) {
        const nextOpen = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 8, 0);
        const diff = nextOpen.getTime() - ms;
        statusEl.innerHTML = "&#10060; Closed today – Sunday (No operation)";
        statusEl.className = "closed";
        countdownEl.innerHTML = `Reopening Monday at 8:00 AM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
        return;
      }

      // Saturday
      if (day === 6) {
        const open = time(8, 0);
        const cutoff = time(11, 0);
        const cutoffEnd = time(11, 30);
        const closedStart = time(11, 31);
        const noon = time(12, 0);

        if (ms < open) {
          const diff = open - ms;
          statusEl.innerHTML = "&#128308; Operation is still CLOSED";
          statusEl.className = "closed";
          countdownEl.innerHTML = `Opening at 8:00 AM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= open && ms < cutoff) {
          const diff = cutoff - ms;
          statusEl.innerHTML = "&#9989; Operation is OPEN (Saturday)";
          statusEl.className = "open";
          countdownEl.innerHTML = `Cut-off starts in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= cutoff && ms < cutoffEnd) {
          const diff = cutoffEnd - ms;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (11:00–11:30 AM)";
          statusEl.className = "soon";
          countdownEl.innerHTML = `Closing soon in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= closedStart && ms < noon) {
          const diff = noon - ms;
          statusEl.innerHTML = "&#10060; Closed – After cut-off (11:31–12:00 NN)";
          statusEl.className = "closed";
          countdownEl.innerHTML = `Closed for weekend in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        const nextOpen = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 2, 8, 0);
        const diff = nextOpen.getTime() - ms;
        statusEl.innerHTML = "&#10060; Operation is CLOSED for the weekend";
        statusEl.className = "closed";
        countdownEl.innerHTML = `Reopening Monday at 8:00 AM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
        return;
      }

      // Monday to Friday
      if (day >= 1 && day <= 5) {
        const open1 = time(8, 0);
        const cutoffAM = time(11, 0);
        const lunchStart = time(12, 1);
        const lunchEnd = time(13, 1);
        const open2 = time(13, 1);
        const cutoffPM = time(16, 1);
        const closePM = time(17, 0);

        if (ms < open1) {
          const diff = open1 - ms;
          statusEl.innerHTML = "&#128308; Operation is still CLOSED";
          statusEl.className = "closed";
          countdownEl.innerHTML = `Opening at 8:00 AM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= open1 && ms < cutoffAM) {
          const diff = cutoffAM - ms;
          statusEl.innerHTML = "&#9989; Operation is OPEN";
          statusEl.className = "open";
          countdownEl.innerHTML = `Cut-off starts in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= cutoffAM && ms < lunchStart) {
          const diff = lunchStart - ms;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (11:00–12:00 PM)";
          statusEl.className = "soon";
          countdownEl.innerHTML = `Lunch starts in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= lunchStart && ms < lunchEnd) {
          const diff = lunchEnd - ms;
          statusEl.innerHTML = "&#10060; Lunch Break (12:01–1:00 PM)";
          statusEl.className = "closed";
          countdownEl.innerHTML = `Resumes at 1:01 PM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= open2 && ms < cutoffPM) {
          const diff = cutoffPM - ms;
          statusEl.innerHTML = "&#9989; Operation is OPEN";
          statusEl.className = "open";
          countdownEl.innerHTML = `Cut-off starts in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        if (ms >= cutoffPM && ms < closePM) {
          const diff = closePM - ms;
          statusEl.innerHTML = "&#9940; Cut-off period – Limited acceptance (4:01–5:00 PM)";
          statusEl.className = "soon";
          countdownEl.innerHTML = `Closing soon in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
          return;
        }

        const nextOpen = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 8, 0);
        const diff = nextOpen.getTime() - ms;
        statusEl.innerHTML = "&#10060; Operation is CLOSED for the day";
        statusEl.className = "closed";
        countdownEl.innerHTML = `Reopening tomorrow at 8:00 AM in: ${hrs(diff)}h ${mins(diff)}m ${secs(diff)}s`;
        return;
      }
    }

    updateStoreStatus();
    setInterval(updateStoreStatus, 1000);
  </script>
</body>
</html>
